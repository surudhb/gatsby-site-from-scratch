{"version":3,"sources":["webpack:///./src/utils/helpers.js","webpack:///./src/pages/blog.js"],"names":["getImageMap","images","regex","hasMultipleImages","limit","reduce","map","image","slug","node","relativePath","match","hasOwnProperty","length","push","childImageSharp","fluid","arr","getInstitutionClass","name","includes","data","useState","filteredData","query","state","setState","allFeaturedImages","allFile","edges","allPosts","allMarkdownRemark","featuredImageMap","Utils","filteredPosts","title","className","type","placeholder","onChange","e","target","value","filter","post","frontmatter","description","tags","author","stdQuery","toLowerCase","excerpt","join","class","key","id","to","fields","featuredImage","subtitle","date"],"mappings":"oOAAe,GACbA,YAAa,SAACC,EAAQC,EAAOC,EAA2BC,GACtD,YADoE,IAAzCD,OAAoB,QAAqB,IAAdC,MAAQ,GACvDH,EAAOI,QAAO,SAACC,EAAKC,GACzB,IAAMC,EAAOD,EAAME,KAAKC,aAAaC,MAAMT,GAAO,GAClD,GAAIC,EACF,GAAIG,EAAIM,eAAeJ,GACjBF,EAAIE,GAAMK,QAAUT,GACtBE,EAAIE,GAAMM,KAAKP,EAAME,KAAKM,gBAAgBC,WACvC,CACL,IAAMC,EAAM,GACZA,EAAIH,KAAKP,EAAME,KAAKM,gBAAgBC,OACpCV,EAAIE,GAAQS,OAGdX,EAAIE,GAAQD,EAAME,KAAKM,gBAAgBC,MAEzC,OAAOV,IACN,KAELY,oBAAqB,SAAAC,GACnB,OAAIA,EAAKC,SAAS,YACV,gBACGD,EAAKC,SAAS,UACjB,cAEA,a,kCCzBZ,kIAMe,sBAAe,IAAZC,EAAW,EAAXA,KAAW,EACDC,mBAAS,CACjCC,aAAc,GACdC,MAAO,KAFFC,EADoB,KACbC,EADa,KAMrBC,EAAoBN,EAAKO,QAAQC,OAAS,GAC1CC,EAAWT,EAAKU,kBAAkBF,OAAS,GAE3CG,EAAmBC,IAAMjC,YAAY2B,EAD7B,kBA0BNJ,EAAwBE,EAAxBF,aACFW,EAA0B,KADAT,EAAVD,MACeD,EAAeO,EAEpD,OACE,kBAAC,IAAD,KACE,kBAAC,IAAD,CAAKK,MAAM,SACX,kBAAC,IAAD,CAAWA,MAAM,YACjB,kBAAC,IAAD,CAAWC,UAAU,yBACnB,kBAAC,IAAD,CAAMA,UAAU,wBACd,kBAAC,IAAD,CACEA,UAAU,iBACVC,KAAK,OACLC,YAAY,SACZC,SApCW,SAAAC,GACnB,IAAMhB,EAAQgB,EAAEC,OAAOC,MAEjBnB,EAAeO,EAASa,QAAO,SAAAC,GAAQ,MAEEA,EAAKnC,KAAKoC,YAA/CC,EAFmC,EAEnCA,YAAaX,EAFsB,EAEtBA,MAAOY,EAFe,EAEfA,KAAMC,EAFS,EAETA,OAE5BC,EAAWzB,EAAM0B,cACvB,OACEN,EAAKnC,KAAK0C,QAAQD,cAAc9B,SAAS6B,IACxCH,GAAeA,EAAYI,cAAc9B,SAAS6B,IACnDd,EAAMe,cAAc9B,SAAS6B,IAC7BD,EAAOE,cAAc9B,SAAS6B,IAC7BF,GAAQA,EAAKK,KAAK,KAAKF,cAAc9B,SAAS6B,MAInDvB,EAAS,CACPF,QACAD,sBAqBA,kBAAC,IAAD,CAAWa,UAAU,wBACnB,yBAAKiB,MAAM,OACRnB,EAAc5B,KAAI,gBAAGG,EAAH,EAAGA,KAAH,OACjB,yBAAK6C,IAAK7C,EAAK8C,GAAInB,UAAU,WAC3B,kBAAC,IAAD,CACEoB,GAAI/C,EAAKgD,OAAOjD,KAChBkD,cAAe1B,EAAiBvB,EAAKgD,OAAOjD,MAC5C2B,MAAO1B,EAAKoC,YAAYV,MACxBwB,SAAUlD,EAAKoC,YAAYe,KAC3BT,QAAS1C,EAAKoC,YAAYM,SAAW1C,EAAK0C,kBAUnD,IAAM3B,EAAK","file":"component---src-pages-blog-js-d3ff5650f26e6c4485f2.js","sourcesContent":["export default {\n  getImageMap: (images, regex, hasMultipleImages = false, limit = 3) => {\n    return images.reduce((map, image) => {\n      const slug = image.node.relativePath.match(regex)[0]\n      if (hasMultipleImages) {\n        if (map.hasOwnProperty(slug)) {\n          if (map[slug].length <= limit)\n            map[slug].push(image.node.childImageSharp.fluid)\n        } else {\n          const arr = []\n          arr.push(image.node.childImageSharp.fluid)\n          map[slug] = arr\n        }\n      } else {\n        map[slug] = image.node.childImageSharp.fluid\n      }\n      return map\n    }, {})\n  },\n  getInstitutionClass: name => {\n    if (name.includes(\"Waterloo\")) {\n      return `waterloo-link`\n    } else if (name.includes(\"Ottawa\")) {\n      return `ottawa-link`\n    } else {\n      return `nd-link`\n    }\n  },\n}\n","import React, { useState } from \"react\"\nimport { graphql } from \"gatsby\"\nimport { PageLayout, PageTitle, BlogLink } from \"../components\"\nimport { SEO, Utils } from \"../utils\"\nimport { Container, Form, FormControl } from \"react-bootstrap\"\n\nexport default ({ data }) => {\n  const [state, setState] = useState({\n    filteredData: [],\n    query: \"\",\n  })\n\n  const allFeaturedImages = data.allFile.edges || []\n  const allPosts = data.allMarkdownRemark.edges || []\n  const regex = /\\/[blog].*\\/|$/\n  const featuredImageMap = Utils.getImageMap(allFeaturedImages, regex)\n\n  const handleChange = e => {\n    const query = e.target.value\n\n    const filteredData = allPosts.filter(post => {\n      // query will run on the following fields\n      const { description, title, tags, author } = post.node.frontmatter\n      // standardize query\n      const stdQuery = query.toLowerCase()\n      return (\n        post.node.excerpt.toLowerCase().includes(stdQuery) ||\n        (description && description.toLowerCase().includes(stdQuery)) ||\n        title.toLowerCase().includes(stdQuery) ||\n        author.toLowerCase().includes(stdQuery) ||\n        (tags && tags.join(\" \").toLowerCase().includes(stdQuery))\n      )\n    })\n\n    setState({\n      query,\n      filteredData,\n    })\n  }\n\n  const { filteredData, query } = state\n  const filteredPosts = query !== \"\" ? filteredData : allPosts\n\n  return (\n    <PageLayout>\n      <SEO title=\"Blog\" />\n      <PageTitle title=\"My Blog\" />\n      <Container className=\"px-5 mb-5 text-center\">\n        <Form className=\"aurebesh blog-filter\">\n          <FormControl\n            className=\"bg-none search\"\n            type=\"text\"\n            placeholder=\"Search\"\n            onChange={handleChange}\n          />\n        </Form>\n      </Container>\n      <Container className=\"m-3 text-left m-auto\">\n        <div class=\"row\">\n          {filteredPosts.map(({ node }) => (\n            <div key={node.id} className=\"m-3 col\">\n              <BlogLink\n                to={node.fields.slug}\n                featuredImage={featuredImageMap[node.fields.slug]}\n                title={node.frontmatter.title}\n                subtitle={node.frontmatter.date}\n                excerpt={node.frontmatter.excerpt || node.excerpt}\n              />\n            </div>\n          ))}\n        </div>\n      </Container>\n    </PageLayout>\n  )\n}\n\nexport const query = graphql`\n  query {\n    allMarkdownRemark(\n      filter: { fileAbsolutePath: { regex: \"/blog/\" } }\n      sort: { fields: [frontmatter___date], order: ASC }\n    ) {\n      totalCount\n      edges {\n        node {\n          id\n          frontmatter {\n            title\n            excerpt\n            description\n            tags\n            author\n            date(formatString: \"DD MMMM, YYYY\")\n          }\n          fields {\n            slug\n          }\n          excerpt\n        }\n      }\n    }\n    allFile(\n      filter: {\n        extension: { regex: \"/png|jpg/\" }\n        relativePath: { regex: \"/feature/\" }\n        relativeDirectory: { regex: \"/content/blog/\" }\n      }\n    ) {\n      edges {\n        node {\n          childImageSharp {\n            fluid(maxWidth: 400) {\n              ...GatsbyImageSharpFluid\n            }\n          }\n          relativePath\n        }\n      }\n    }\n  }\n`\n"],"sourceRoot":""}